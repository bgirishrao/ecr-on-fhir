{"resourceType":"PlanDefinition","id":"plandefinition-cancer-example","meta":{"versionId":"1","lastUpdated":"2020-11-29T02:03:28.045+00:00","profile":["http://hl7.org/fhir/us/medmorph/StructureDefinition/us-ph-plandefinition"]},"extension":[{"url":"http://hl7.org/fhir/us/medmorph/StructureDefinition/ext-receiverAddress","valueReference":{"reference":"Endpoint/example-ph-endpoint"}},{"url":"http://hl7.org/fhir/us/medmorph/StructureDefinition/ext-authorSignature","valueSignature":{"type":[{"system":"urn:iso-astm:E1762-95:2013","code":"1.2.840.10065.1.12.1.5","display":"Verification Signature"}],"when":"2015-08-26T22:39:24.000+00:00","who":{"reference":"Organization/example-pha-org"},"targetFormat":"application/fhir+xml","sigFormat":"application/signature+xml","data":"Li4u"}},{"url":"http://hl7.org/fhir/us/medmorph/StructureDefinition/ext-asyncIndicator","valueBoolean":true},{"url":"http://hl7.org/fhir/us/medmorph/StructureDefinition/ext-expectedResponseTime","valueDuration":{"value":1,"system":"http://unitsofmeasure.org","code":"min"}}],"url":"http://hl7.org/fhir/us/medmorph/StructureDefinition/plandefinition-cancer-example","version":"0.2.0","name":"PlanDefinitionCancerExample","title":"PlanDefinition Cancer Reporting Example","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/plan-definition-type","code":"workflow-definition","display":"Workflow Definition"}]},"status":"draft","experimental":true,"date":"2020-11-04T12:32:29.858-05:00","publisher":"HL7 International - Public Health Work Group","contact":[{"telecom":[{"system":"url","value":"http://hl7.org/Special/committees/pher"}]}],"description":"This is the Cancer Reporting Knowledge Artifact","jurisdiction":[{"coding":[{"system":"urn:iso:std:iso:3166","code":"US"}]}],"effectivePeriod":{"start":"2020-11-01"},"relatedArtifact":[{"type":"depends-on","label":"Cancer Trigger Codes","resource":"http://hl7.org/fhir/us/medmorph/ValueSet/valueset-cancer-trigger-codes-example"}],"action":[{"id":"initiate-reporting-workflow","description":"This action represents the start of a reporting workflow.","textEquivalent":"Initiate Reporting Workflow","code":[{"coding":[{"system":"http://hl7.org/fhir/us/medmorph/CodeSystem/us-ph-plandefinition-actions","code":"initiate-reporting-workflow"}]}],"trigger":[{"extension":[{"url":"http://hl7.org/fhir/us/medmorph/StructureDefinition/ext-us-ph-namedEventType","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/us/medmorph/CodeSystem/us-ph-triggerdefinition-namedevents","code":"encounter-close","display":"Indicates the close of an encounter"}]}}],"type":"named-event","name":"encounter-close"}],"input":[{"type":"Patient"},{"extension":[{"url":"http://hl7.org/fhir/us/medmorph/StructureDefinition/us-ph-fhirquerypattern-extension","valueString":"/Encounter?patient={context.patientId}"}],"type":"Encounter"}],"relatedAction":[{"actionId":"check-trigger-codes","relationship":"before-start","offsetDuration":{"value":1,"system":"http://unitsofmeasure.org","code":"min"}}]},{"id":"check-trigger-codes","description":"This action represents the execution of the checking trigger codes in the  workflow.","textEquivalent":"Check Trigger Codes","action":[{"code":[{"coding":[{"system":"http://hl7.org/fhir/us/medmorph/CodeSystem/us-ph-plandefinition-actions","code":"check-trigger-codes"}]}],"condition":[{"kind":"applicability","expression":{"language":"text/fhirpath","expression":"Condition.code.memberof(http://hl7.org/fhir/us/medmorph/ValueSet/valueset-cancer-trigger-codes-example)"}}],"input":[{"type":"Patient"},{"type":"Encounter"}],"relatedAction":[{"actionId":"create-report","relationship":"before-start"}]}]},{"id":"create-report","description":"This action represents the creation of a cancer report.","textEquivalent":"Create Report","code":[{"coding":[{"system":"http://hl7.org/fhir/us/medmorph/CodeSystem/us-ph-plandefinition-actions","code":"create-report"}]}],"output":[{"type":"Bundle","profile":["http://hl7.org/fhir/us/medmorph/StructureDefinition/us-ph-reporting-bundle"]}]}]}